<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Run Length Encoder</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
<p></p>

<!--    <form action=""></form>-->
<label for="input">Input:</label>
<input type="text" id="input">
<input type="submit" id="random" value="Random">
<input type="submit" id="submit">
<p>Output: <span id="output"></span></p>

<!--    ENCODER FUNCTION-->
<script>
    function encode(pattern) {
        const iteratePattern = pattern.split("");
        var count = 1; //starts at one to account for the first instance of the letter
        var compressedPattern = "";

        for (var i = 0; i < pattern.length; i++) { //iterates through split string from 0
            var j = i + 1 //looks at next index from the increment (i) to compare, when it reaches the end of the split string it will compare against "undefined" and stop
            // console.log(i + " and " + h);

            var build = count + iteratePattern[i]; //returns count of each group of letters as it iterates through the pattern to be appended to the compressedPattern

            // console.log(iteratePattern[i] + " and " + iteratePattern[j]);
            if (iteratePattern[i] === iteratePattern[j]) {
                // console.log("matching");
                count++;

                // console.log(build)
            } else {
                // console.log("not matching");
                compressedPattern += build; //"builds" the compressed version of the pattern
                // console.log(compressedPattern);

                count = 1; //resets count if not matched, but only after appending the previous build
            }
        }
        console.log("input: " + pattern)
        console.log("output: " + compressedPattern);
        return compressedPattern;
    }

    encode("hhpnnnyhh"); //the function should not return 4h, but 2h on each end of the output (compressedPattern)
    //error: nnn returns 1n2n3n, need it to just return 3n
    //update: fixed, changed build to only append after the matches break, then reset count

    $("#submit").click(function () {
        $("#output").html(
            encode($("#input").val())
        )
    })

    //    RANDOM PATTERN GENERATOR
    const alphabet = "abcdefghijklmnopqrstuvwxyz";

    const scopeSize = 3;
    const randomScopeStart = Math.floor(Math.random() * (alphabet.length - scopeSize)); //generates number between 13 and 13 representing the index number
    const randomScopeEnd = randomScopeStart + scopeSize;
    const scope = alphabet.slice(randomScopeStart, randomScopeEnd); //takes the random numbers to create a shortened version of alphabet

    var generatePattern = "";

    for (var i = 0; i < alphabet.length; i++) {
        const randomCharacter = alphabet[Math.floor(Math.random() * alphabet.length)] //generates random letter through random index number that is being passed
        const randomCharacterInScope = scope[Math.floor(Math.random() * scope.length)] //generates random letter within the generated scope, raising the chances of repeating letters to be compressed

        generatePattern += randomCharacterInScope;
    }
    // console.log(alphabet.slice(randomScopeStart, randomScopeEnd));
    console.log("random pattern: " + generatePattern);

    $("#random").click(function(){
        $("#input").val(generatePattern)
    })
    //error: can only click on the button once, need to put the loop in a function to be called on every time its clicked

</script>
</body>
</html>