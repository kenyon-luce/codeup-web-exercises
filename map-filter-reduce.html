<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Map ~ Filter ~ Reduce</title>
</head>
<body>

<script>

    //~ * Map * ~

    //TODO Together: Let's see a common approach we might have done in the past: our goal is to increase each element of an array by 1 [element + 1], then get an array back with those values

    var numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

    var numbersAddOne = [];

    for (var i = 0; i < numbers.length; i += 1) {
        numbersAddOne.push(numbers[i] + 1);
    }
    console.log("using for-loop")
    console.log(numbersAddOne);

    //TODO Together: Now, let's achieve the same result with the first part of our lesson: the MAP method~

    let numbersAddOneMap = numbers.map(function (num) {
        return num + 1
    });
    console.log("using map method")
    console.log(numbersAddOneMap);

    //TODO Together: Let's get all these restaurant names out of this array of objects with .map()!

    //TODO: Create your own array of (up to 3 and at least 2) restaurant objects building off of the basic list you created during the MapBox exercise (or build one anew!) ~5 mins
    var locations = [
        {
            name: "Tycoon FLats",
            place: "2926 N St Mary's St, San Antonio, TX 78212",
            info: 'restaurant',
        },
        {
            name: "World Market",
            place: "742 Northwest Loop 410 # 123",
            info: 'store',
        },
        {
            name: "North Star Mall",
            place: "7400 San Pedro Ave, San Antonio, TX 78216",
            info: "store, restaurant",
        }
    ]

    //TODO: Now, having created a personal array of restaurant objects for yourself, use .map() to get your favorite restaurant's names out of that collection, into another array, and out into the console! ~5 mins
    var locationNames = locations.map(function (loc) {
        return loc.name
    })
    var locationAddress = locations.map(function (loc) {
        return loc.place
    })
    var locationNameAndAddress = locations.map(loc => loc.name + ": " + loc.place)

    console.log(locationNames)
    console.log(locationAddress)
    console.log(locationNameAndAddress)


    //~ * Filter * ~

    //TODO Together: Once again, let's take a look at the old way we might approach an issue: getting only one type of values out of an array (for example: even numbers only from an array of nums!)

    var even = [];

    for (var num = 0; num < numbers.length; num += 1) {
        if (numbers[num] % 2 === 0) {
            even.push(numbers[num]);
        }
    }
    console.log("using for-loop to return even numbers")
    console.log(even);

    //TODO Together: Now, let's refactor the above using the ES6 .filter() method with the same goal: even numbers only!

    let evenFilter = numbers.filter(function (num) {
        return num % 2 === 0;
    });
    console.log("using filter method to return even numbers")
    console.log(evenFilter)

    //TODO Together: Using my favoriteRestaurants list, let's filter out all of the non-buffet restaurants


    //TODO: Each one of your restaurant arrays is unique, but, in that array, identify something to filter by - it could be as simple as "well, let me filter out all of the restaurants with names shorter than 8 characters" or get as complicated as you'd like!

    //TODO: Once you've done the above, go ahead and write the necessary code to achieve what you wanted - remember to practice with .filter() and our ES6 verbiage!

    let hasStore = locations.filter(function (loc) {
        return loc.info.includes("store");
    })
    console.log("these places have stores")
    console.log(hasStore);

    //~ * Reduce * ~

    //Reduce is an interesting animal in and of itself: it's a way to reduce a collection down to, typically, a single value of some kind:

    //TODO Together: Let's sum up some numbers with the .reduce() method and a number array!
    let sum = numbers.reduce(function (total, num) {
        return total + num;
    }, 0)
    //adds the sum to the 0
    console.log("adding all numbers")
    console.log(sum)

    //TODO Together: That's pretty wild, eh! Wonder what else we could get up to with .reduce() - how about we make a function and use .reduce() inside of it? We'll write a function named countWords that takes a sentence in a single string. We need to split that sentence into an array and then write a .reduce() that would let us know how many times each word appeared in the string.

    function countWords(sentence) {
        const words = sentence.split(' '); // transform a sentence into an array of words
        const wordCountObject = words.reduce((wordCounts, word) => {
            if (typeof wordCounts[word] === 'undefined') {
                // if the word is not yet present in our object, set it's value to 1
                wordCounts[word] = 1;
            } else {
                // otherwise increment the existing count
                wordCounts[word] += 1;
            }
            return wordCounts;
        }, {}); // start with an empty object
        return wordCountObject;
    }

    console.log('counting word appearance in a string')
    console.log(countWords('Mary had a little lamb little lamb little lamb'));
    // {Mary: 1, had: 1, a: 1, little: 3, lamb: 3}

    //TODO: Create a function that returns the letter count for each word in the following array
    let stringArr = ['Codeup', 'San', 'Antonio', 'Dallas', 'Marco', 'Cohort', 'ES6'];

    let stringLengthObj = stringArr.reduce(function (object, element) {
        object[element] = element.length; //assign length as value of property named element {elementName: elementLength}
        //object represents the stringArr (since that's what we are reducing), and the element parameter represents each string in the array
        return object;
    }, {})
    //uses array notation to add 'property: value' to an empty object
    console.log('the object below returns the amount of letters each string has')
    console.log(stringLengthObj);

    //TODO Together: Pretty good, but do we want to count the number of times the comma is involved? If only we had a method that would .filter() - wait! Let's refactor the above function to do just that!
    function countWordsFilter(sentence) {
        let words = sentence.split(' '); // transform a sentence into an array of words
        words = words.filter(function(word){
           return word !== ",";
        }); //removes commas from array before reducing

        let wordCountObjectFilter = words.reduce((wordCounts, word) => {
            if (typeof wordCounts[word] === 'undefined') {
                // if the word is not yet present in our object, set it's value to 1
                wordCounts[word] = 1;
            } else {
                // otherwise increment the existing count
                wordCounts[word] += 1;
            }
            return wordCounts;
        }, {}); // start with an empty object
        return wordCountObjectFilter;
    }



    //TODO: Let's make a new array of objects to use - make an array of objects [{},{},{}] consisting of a number of family members as objects with their name and ages as properties. Use .reduce() to sum up the age of those family members and see what it is! e.g. [{name: "Thurston Howell III", age: 50}, {name: "William Dean Howells", age: 83}] would be 133 by adding those two age properties together (50 + 83).
var family = [
    {
        name: 'Kenyon Luce',
        age: 19
    },
    {
        name: 'Aiden Luce',
        age: 17
    },
    {
        name: 'Ivelisse Caban de Luce',
        age: 54
    },
    {
        name: 'Dave Luce',
        age: 55
    }
]
    var sumFamilyAge = family.reduce(function(total, familyMember) {
        return total + familyMember.age;
    }, 0);
    console.log(sumFamilyAge)

</script>
</body>
</html>